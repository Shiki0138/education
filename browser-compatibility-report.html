<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ãƒ–ãƒ©ã‚¦ã‚¶äº’æ›æ€§ãƒ†ã‚¹ãƒˆãƒ¬ãƒãƒ¼ãƒˆ</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
        }
        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
        }
        h1, h2 { color: #2c3e50; }
        .test-section {
            margin: 25px 0;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
            border-left: 5px solid #3498db;
        }
        .success { color: #27ae60; font-weight: bold; }
        .error { color: #e74c3c; font-weight: bold; }
        .warning { color: #f39c12; font-weight: bold; }
        .info { color: #3498db; font-weight: bold; }
        .test-button {
            background: #3498db;
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 8px;
            cursor: pointer;
            margin: 10px 5px;
            font-size: 14px;
            transition: background 0.3s;
        }
        .test-button:hover { background: #2980b9; }
        .test-button.danger {
            background: #e74c3c;
        }
        .test-button.danger:hover { background: #c0392b; }
        .code-block {
            background: #2c3e50;
            color: #ecf0f1;
            padding: 15px;
            border-radius: 8px;
            overflow-x: auto;
            font-family: 'Courier New', monospace;
            margin: 10px 0;
        }
        .status-indicator {
            display: inline-block;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            margin-right: 10px;
            vertical-align: middle;
        }
        .status-success { background: #27ae60; }
        .status-error { background: #e74c3c; }
        .status-warning { background: #f39c12; }
        .status-info { background: #3498db; }
        .results-table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
        }
        .results-table th, .results-table td {
            border: 1px solid #ddd;
            padding: 12px;
            text-align: left;
        }
        .results-table th {
            background: #34495e;
            color: white;
        }
        .results-table tr:nth-child(even) {
            background: #f2f2f2;
        }
        .accordion {
            margin: 10px 0;
        }
        .accordion-header {
            background: #34495e;
            color: white;
            padding: 15px;
            cursor: pointer;
            border-radius: 8px;
            margin-bottom: 5px;
        }
        .accordion-content {
            display: none;
            padding: 15px;
            background: #ecf0f1;
            border-radius: 8px;
        }
        .accordion.active .accordion-content {
            display: block;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ” æ¼¢å­—ç·´ç¿’ãƒœã‚¿ãƒ³ - ãƒ–ãƒ©ã‚¦ã‚¶äº’æ›æ€§ãƒ†ã‚¹ãƒˆãƒ¬ãƒãƒ¼ãƒˆ</h1>
        <p><strong>å¯¾è±¡URL:</strong> <a href="https://shiki0138.github.io/education/" target="_blank">https://shiki0138.github.io/education/</a></p>
        <p><strong>ãƒ†ã‚¹ãƒˆå®Ÿè¡Œæ™‚åˆ»:</strong> <span id="currentTime"></span></p>
        
        <div class="test-section">
            <h2>ğŸ¯ ãƒ†ã‚¹ãƒˆæ¦‚è¦</h2>
            <p>ã“ã®ãƒ¬ãƒãƒ¼ãƒˆã¯æ¼¢å­—ç·´ç¿’ãƒœã‚¿ãƒ³ãŒåå¿œã—ãªã„å•é¡Œã‚’è©³ç´°ã«èª¿æŸ»ã—ãŸçµæœã§ã™ã€‚ä»¥ä¸‹ã®ãƒã‚¤ãƒ³ãƒˆã‚’é‡ç‚¹çš„ã«æ¤œè¨¼ã—ã¾ã—ãŸï¼š</p>
            <ul>
                <li>JavaScriptå®Ÿè¡Œç’°å¢ƒã®ç¢ºèª</li>
                <li>onclickå±æ€§ã¨startKanji()é–¢æ•°ã®é–¢ä¿‚æ€§</li>
                <li>ãƒ–ãƒ©ã‚¦ã‚¶å›ºæœ‰ã®åˆ¶é™ãƒ»ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒãƒªã‚·ãƒ¼</li>
                <li>ãƒ¢ãƒã‚¤ãƒ«ãƒ»ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ã§ã®å‹•ä½œå·®ç•°</li>
                <li>å¤–éƒ¨ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®å½±éŸ¿</li>
                <li>GitHub Pagesã®é…ä¿¡ãƒ˜ãƒƒãƒ€ãƒ¼</li>
            </ul>
        </div>

        <div class="test-section">
            <h2>ğŸ“Š ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ è¨ºæ–­ãƒ†ã‚¹ãƒˆ</h2>
            <p>ä»¥ä¸‹ã®ãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ã¦ç¾åœ¨ã®ãƒ–ãƒ©ã‚¦ã‚¶ç’°å¢ƒã§è¨ºæ–­ã‚’å®Ÿè¡Œã—ã¦ãã ã•ã„ï¼š</p>
            
            <button class="test-button" onclick="runEnvironmentTest()">ğŸ” ç’°å¢ƒè¨ºæ–­</button>
            <button class="test-button" onclick="runKanjiFunctionTest()">ğŸ“ startKanjié–¢æ•°ãƒ†ã‚¹ãƒˆ</button>
            <button class="test-button" onclick="runEventTest()">ğŸ¯ ã‚¤ãƒ™ãƒ³ãƒˆãƒ†ã‚¹ãƒˆ</button>
            <button class="test-button" onclick="runSecurityTest()">ğŸ›¡ï¸ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ†ã‚¹ãƒˆ</button>
            <button class="test-button danger" onclick="runActualKanjiButton()">âš ï¸ å®Ÿéš›ã®ãƒœã‚¿ãƒ³ãƒ†ã‚¹ãƒˆ</button>
            
            <div id="testResults" style="margin-top: 20px;"></div>
        </div>

        <div class="accordion">
            <div class="accordion-header" onclick="toggleAccordion(this)">
                ğŸ“‹ GitHub Pagesãƒ˜ãƒƒãƒ€ãƒ¼åˆ†æçµæœ
            </div>
            <div class="accordion-content">
                <table class="results-table">
                    <tr><th>ãƒ˜ãƒƒãƒ€ãƒ¼é …ç›®</th><th>å€¤</th><th>å½±éŸ¿</th></tr>
                    <tr><td>Content-Security-Policy</td><td class="info">æœªè¨­å®š</td><td class="success">inline-scriptåˆ¶é™ãªã—</td></tr>
                    <tr><td>Cache-Control</td><td>max-age=600</td><td class="warning">10åˆ†ã‚­ãƒ£ãƒƒã‚·ãƒ¥</td></tr>
                    <tr><td>Server</td><td>GitHub.com</td><td class="success">æ­£å¸¸é…ä¿¡</td></tr>
                    <tr><td>Content-Type</td><td>text/html; charset=utf-8</td><td class="success">æ­£å¸¸</td></tr>
                </table>
                
                <h4>åˆ†æçµæœï¼š</h4>
                <ul>
                    <li class="success">âœ… CSPã«ã‚ˆã‚‹inline-scriptåˆ¶é™ã¯ã‚ã‚Šã¾ã›ã‚“</li>
                    <li class="warning">âš ï¸ 10åˆ†é–“ã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãŒè¨­å®šã•ã‚Œã¦ã„ã¾ã™</li>
                    <li class="success">âœ… é©åˆ‡ãªContent-TypeãŒè¨­å®šã•ã‚Œã¦ã„ã¾ã™</li>
                </ul>
            </div>
        </div>

        <div class="accordion">
            <div class="accordion-header" onclick="toggleAccordion(this)">
                ğŸ’» ã‚³ãƒ¼ãƒ‰ãƒ¬ãƒ™ãƒ«åˆ†æçµæœ
            </div>
            <div class="accordion-content">
                <h4>HTMLæ§‹é€ ç¢ºèªï¼š</h4>
                <div class="code-block">
&lt;button class="menu-btn" onclick="startKanji()"&gt;
    &lt;span class="menu-icon"&gt;ğŸ“&lt;/span&gt;
    &lt;div&gt;&lt;strong&gt;æ¼¢å­—ç·´ç¿’&lt;/strong&gt;&lt;/div&gt;
    &lt;div&gt;åŸºæœ¬æ¼¢å­—ã‚’ãƒã‚¹ã‚¿ãƒ¼&lt;/div&gt;
&lt;/button&gt;
                </div>

                <h4>JavaScripté–¢æ•°å®šç¾©ç¢ºèªï¼š</h4>
                <div class="code-block">
function startKanji() {
    console.log('ğŸ“ æ¼¢å­—ç·´ç¿’é–‹å§‹ï¼ˆã‚·ãƒ³ãƒ—ãƒ«ç‰ˆï¼‰');
    currentQuestion = 0;
    score = 0;
    showScreen('kanjiScreen');
    showKanjiQuestion();
}
                </div>

                <h4>åˆ†æçµæœï¼š</h4>
                <ul>
                    <li class="success">âœ… onclickå±æ€§ã¯æ­£ã—ãè¨­å®šã•ã‚Œã¦ã„ã¾ã™</li>
                    <li class="success">âœ… startKanji()é–¢æ•°ã¯é©åˆ‡ã«å®šç¾©ã•ã‚Œã¦ã„ã¾ã™</li>
                    <li class="success">âœ… å¿…è¦ãªDOMè¦ç´ ã¯å­˜åœ¨ã—ã¾ã™</li>
                    <li class="info">â„¹ï¸ è¿½åŠ ã®ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ã‚‚è¨­å®šã•ã‚Œã¦ã„ã¾ã™</li>
                </ul>
            </div>
        </div>

        <div class="accordion">
            <div class="accordion-header" onclick="toggleAccordion(this)">
                ğŸŒ ãƒ–ãƒ©ã‚¦ã‚¶åˆ¥å‹•ä½œç¢ºèªçµæœ
            </div>
            <div class="accordion-content">
                <table class="results-table">
                    <tr><th>ãƒ–ãƒ©ã‚¦ã‚¶</th><th>ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—</th><th>ãƒ¢ãƒã‚¤ãƒ«</th><th>ç‰¹è¨˜äº‹é …</th></tr>
                    <tr>
                        <td>Chrome</td>
                        <td><span class="status-indicator status-success"></span>å‹•ä½œäºˆæƒ³ï¼šæ­£å¸¸</td>
                        <td><span class="status-indicator status-success"></span>å‹•ä½œäºˆæƒ³ï¼šæ­£å¸¸</td>
                        <td>æœ€ã‚‚äº’æ›æ€§ãŒé«˜ã„</td>
                    </tr>
                    <tr>
                        <td>Safari</td>
                        <td><span class="status-indicator status-warning"></span>è¦ç¢ºèª</td>
                        <td><span class="status-indicator status-warning"></span>è¦ç¢ºèª</td>
                        <td>Webkitå›ºæœ‰ã®åˆ¶é™ã®å¯èƒ½æ€§</td>
                    </tr>
                    <tr>
                        <td>Firefox</td>
                        <td><span class="status-indicator status-success"></span>å‹•ä½œäºˆæƒ³ï¼šæ­£å¸¸</td>
                        <td><span class="status-indicator status-success"></span>å‹•ä½œäºˆæƒ³ï¼šæ­£å¸¸</td>
                        <td>æ¨™æº–æº–æ‹ ã§å•é¡Œãªã—</td>
                    </tr>
                    <tr>
                        <td>Edge</td>
                        <td><span class="status-indicator status-success"></span>å‹•ä½œäºˆæƒ³ï¼šæ­£å¸¸</td>
                        <td><span class="status-indicator status-info"></span>ãƒ†ã‚¹ãƒˆè¦</td>
                        <td>Chromiumãƒ™ãƒ¼ã‚¹</td>
                    </tr>
                </table>
            </div>
        </div>

        <div class="accordion">
            <div class="accordion-header" onclick="toggleAccordion(this)">
                ğŸ”§ æ¨å¥¨è§£æ±ºç­–
            </div>
            <div class="accordion-content">
                <h4>å³åº§ã«è©¦ã›ã‚‹è§£æ±ºç­–ï¼š</h4>
                <ol>
                    <li class="warning"><strong>ãƒãƒ¼ãƒ‰ãƒªãƒ­ãƒ¼ãƒ‰å®Ÿè¡Œ</strong> - Ctrl+Shift+R (Windows) / Cmd+Shift+R (Mac)</li>
                    <li class="info"><strong>ãƒ–ãƒ©ã‚¦ã‚¶ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚¯ãƒªã‚¢</strong> - è¨­å®š > ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ > é–²è¦§ãƒ‡ãƒ¼ã‚¿ã®å‰Šé™¤</li>
                    <li class="info"><strong>ä»–ã®ãƒ–ãƒ©ã‚¦ã‚¶ã§ãƒ†ã‚¹ãƒˆ</strong> - Chromeã€Safariã€Firefoxã§ãã‚Œãã‚Œç¢ºèª</li>
                    <li class="info"><strong>ãƒ¢ãƒã‚¤ãƒ«ãƒ»ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ä¸¡æ–¹ã§ãƒ†ã‚¹ãƒˆ</strong></li>
                </ol>

                <h4>é–‹ç™ºè€…å‘ã‘è©³ç´°è§£æ±ºç­–ï¼š</h4>
                <ol>
                    <li><strong>ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ã®é‡è¤‡ãƒã‚§ãƒƒã‚¯</strong> - addEventListener ã¨ onclick ã®ç«¶åˆç¢ºèª</li>
                    <li><strong>ã‚¹ã‚¯ãƒªãƒ—ãƒˆèª­ã¿è¾¼ã¿é †åºã®æœ€é©åŒ–</strong> - DOM Readyå¾Œã®åˆæœŸåŒ–ç¢ºèª</li>
                    <li><strong>ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã®å¼·åŒ–</strong> - try-catchæ–‡ã§ã®ä¾‹å¤–å‡¦ç†è¿½åŠ </li>
                    <li><strong>Polyfillã®è¿½åŠ </strong> - å¤ã„ãƒ–ãƒ©ã‚¦ã‚¶å¯¾å¿œã®ãŸã‚ã®äº’æ›æ€§ãƒ©ã‚¤ãƒ–ãƒ©ãƒª</li>
                </ol>

                <h4>æ¨å¥¨ã‚³ãƒ¼ãƒ‰æ”¹å–„æ¡ˆï¼š</h4>
                <div class="code-block">
// ã‚ˆã‚Šç¢ºå®Ÿãªã‚¤ãƒ™ãƒ³ãƒˆè¨­å®š
document.addEventListener('DOMContentLoaded', function() {
    const kanjiBtn = document.querySelector('[onclick*="startKanji"]');
    if (kanjiBtn) {
        // onclickå±æ€§ã«åŠ ãˆã¦ã€addEventListener ã‚‚è¨­å®š
        kanjiBtn.addEventListener('click', function(e) {
            e.preventDefault();
            if (typeof startKanji === 'function') {
                startKanji();
            } else {
                console.error('startKanji function not found');
            }
        });
        console.log('âœ… æ¼¢å­—ãƒœã‚¿ãƒ³ã‚¤ãƒ™ãƒ³ãƒˆè¨­å®šå®Œäº†');
    }
});
                </div>
            </div>
        </div>

        <div class="test-section">
            <h2>ğŸ“± ãƒ¢ãƒã‚¤ãƒ«å›ºæœ‰ãƒ†ã‚¹ãƒˆ</h2>
            <p id="mobileTestResults">ãƒ¢ãƒã‚¤ãƒ«ç’°å¢ƒæ¤œå‡ºä¸­...</p>
            <button class="test-button" onclick="runMobileSpecificTest()">ğŸ“± ãƒ¢ãƒã‚¤ãƒ«ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ</button>
        </div>

        <div class="test-section">
            <h2>ğŸš¨ ç·Šæ€¥å¯¾å¿œæ‰‹é †</h2>
            <div style="background: #ffe6e6; padding: 15px; border-radius: 8px; border-left: 5px solid #e74c3c;">
                <h4>å•é¡ŒãŒè§£æ±ºã—ãªã„å ´åˆï¼š</h4>
                <ol>
                    <li>ãƒ–ãƒ©ã‚¦ã‚¶ã®é–‹ç™ºè€…ãƒ„ãƒ¼ãƒ«ã‚’é–‹ã (F12)</li>
                    <li>Consoleã‚¿ãƒ–ã§ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ç¢ºèª</li>
                    <li>Networkã‚¿ãƒ–ã§ãƒªã‚½ãƒ¼ã‚¹èª­ã¿è¾¼ã¿çŠ¶æ³ã‚’ç¢ºèª</li>
                    <li>ä»¥ä¸‹ã®ã‚³ãƒ¼ãƒ‰ã‚’ç›´æ¥ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã«è²¼ã‚Šä»˜ã‘ã¦å®Ÿè¡Œï¼š</li>
                </ol>
                <div class="code-block">
// ç·Šæ€¥è¨ºæ–­ã‚³ãƒ¼ãƒ‰
console.log('ç·Šæ€¥è¨ºæ–­é–‹å§‹');
console.log('startKanjié–¢æ•°å­˜åœ¨:', typeof startKanji === 'function');
document.querySelectorAll('[onclick*="startKanji"]').forEach((btn, i) => {
    console.log(`ãƒœã‚¿ãƒ³${i+1}:`, btn.onclick, btn.getAttribute('onclick'));
});
                </div>
            </div>
        </div>
    </div>

    <script>
        // ç¾åœ¨æ™‚åˆ»è¡¨ç¤º
        document.getElementById('currentTime').textContent = new Date().toLocaleString('ja-JP');

        // ã‚¢ã‚³ãƒ¼ãƒ‡ã‚£ã‚ªãƒ³æ©Ÿèƒ½
        function toggleAccordion(header) {
            const accordion = header.parentElement;
            accordion.classList.toggle('active');
        }

        // ç’°å¢ƒè¨ºæ–­ãƒ†ã‚¹ãƒˆ
        function runEnvironmentTest() {
            const results = document.getElementById('testResults');
            let html = '<h3>ğŸ” ç’°å¢ƒè¨ºæ–­çµæœ</h3>';
            
            html += `<p><span class="status-indicator ${navigator.onLine ? 'status-success' : 'status-error'}"></span>ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯: ${navigator.onLine ? 'ã‚ªãƒ³ãƒ©ã‚¤ãƒ³' : 'ã‚ªãƒ•ãƒ©ã‚¤ãƒ³'}</p>`;
            html += `<p><span class="status-indicator status-info"></span>ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ: ${navigator.userAgent}</p>`;
            html += `<p><span class="status-indicator status-info"></span>ç”»é¢ã‚µã‚¤ã‚º: ${window.innerWidth}x${window.innerHeight}</p>`;
            html += `<p><span class="status-indicator status-info"></span>ãƒ‡ãƒã‚¤ã‚¹ãƒ”ã‚¯ã‚»ãƒ«æ¯”: ${window.devicePixelRatio}</p>`;
            
            const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
            html += `<p><span class="status-indicator ${isMobile ? 'status-warning' : 'status-success'}"></span>ãƒ‡ãƒã‚¤ã‚¹: ${isMobile ? 'ãƒ¢ãƒã‚¤ãƒ«' : 'ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—'}</p>`;
            
            results.innerHTML = html;
        }

        // startKanjié–¢æ•°ãƒ†ã‚¹ãƒˆ
        function runKanjiFunctionTest() {
            const results = document.getElementById('testResults');
            let html = '<h3>ğŸ“ startKanjié–¢æ•°ãƒ†ã‚¹ãƒˆçµæœ</h3>';
            
            if (typeof startKanji === 'function') {
                html += `<p><span class="status-indicator status-success"></span>startKanjié–¢æ•°: å®šç¾©æ¸ˆã¿</p>`;
                html += `<p><span class="status-indicator status-info"></span>é–¢æ•°é•·: ${startKanji.toString().length}æ–‡å­—</p>`;
            } else {
                html += `<p><span class="status-indicator status-error"></span>startKanjié–¢æ•°: æœªå®šç¾©</p>`;
                html += `<p class="error">âš ï¸ é‡å¤§ãªå•é¡Œï¼šstartKanjié–¢æ•°ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“</p>`;
            }
            
            const kanjiButtons = document.querySelectorAll('[onclick*="startKanji"]');
            html += `<p><span class="status-indicator status-info"></span>æ¼¢å­—ç·´ç¿’ãƒœã‚¿ãƒ³æ•°: ${kanjiButtons.length}å€‹</p>`;
            
            results.innerHTML = html;
        }

        // ã‚¤ãƒ™ãƒ³ãƒˆãƒ†ã‚¹ãƒˆ
        function runEventTest() {
            const results = document.getElementById('testResults');
            let html = '<h3>ğŸ¯ ã‚¤ãƒ™ãƒ³ãƒˆãƒ†ã‚¹ãƒˆçµæœ</h3>';
            
            const kanjiButtons = document.querySelectorAll('[onclick*="startKanji"]');
            
            if (kanjiButtons.length > 0) {
                kanjiButtons.forEach((btn, index) => {
                    const onclick = btn.getAttribute('onclick');
                    html += `<p><span class="status-indicator status-info"></span>ãƒœã‚¿ãƒ³${index + 1} onclick: ${onclick}</p>`;
                    
                    // ã‚¯ãƒªãƒƒã‚¯å¯èƒ½æ€§ãƒ†ã‚¹ãƒˆ
                    const style = window.getComputedStyle(btn);
                    const isVisible = style.display !== 'none' && style.visibility !== 'hidden';
                    const isEnabled = !btn.disabled;
                    
                    html += `<p><span class="status-indicator ${isVisible && isEnabled ? 'status-success' : 'status-error'}"></span>ãƒœã‚¿ãƒ³${index + 1} çŠ¶æ…‹: ${isVisible && isEnabled ? 'æ­£å¸¸' : 'ç„¡åŠ¹'}</p>`;
                });
            } else {
                html += `<p><span class="status-indicator status-error"></span>æ¼¢å­—ç·´ç¿’ãƒœã‚¿ãƒ³ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“</p>`;
            }
            
            results.innerHTML = html;
        }

        // ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ†ã‚¹ãƒˆ
        function runSecurityTest() {
            const results = document.getElementById('testResults');
            let html = '<h3>ğŸ›¡ï¸ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ†ã‚¹ãƒˆçµæœ</h3>';
            
            // CSPãƒã‚§ãƒƒã‚¯
            const cspMeta = document.querySelector('meta[http-equiv="Content-Security-Policy"]');
            if (cspMeta) {
                html += `<p><span class="status-indicator status-warning"></span>CSPæ¤œå‡º: ${cspMeta.content.substring(0, 50)}...</p>`;
            } else {
                html += `<p><span class="status-indicator status-success"></span>CSP: åˆ¶é™ãªã—</p>`;
            }
            
            // eval ãƒ†ã‚¹ãƒˆ
            try {
                eval('1+1');
                html += `<p><span class="status-indicator status-success"></span>eval(): å®Ÿè¡Œå¯èƒ½</p>`;
            } catch (e) {
                html += `<p><span class="status-indicator status-error"></span>eval(): åˆ¶é™ã‚ã‚Š - ${e.message}</p>`;
            }
            
            results.innerHTML = html;
        }

        // å®Ÿéš›ã®ãƒœã‚¿ãƒ³ãƒ†ã‚¹ãƒˆ
        function runActualKanjiButton() {
            const results = document.getElementById('testResults');
            let html = '<h3>âš ï¸ å®Ÿéš›ã®ãƒœã‚¿ãƒ³ãƒ†ã‚¹ãƒˆçµæœ</h3>';
            
            if (typeof startKanji === 'function') {
                html += `<p><span class="status-indicator status-success"></span>é–¢æ•°å®Ÿè¡Œæº–å‚™å®Œäº†</p>`;
                html += `<p><span class="status-indicator status-info"></span>3ç§’å¾Œã«è‡ªå‹•ã§startKanji()ã‚’å®Ÿè¡Œã—ã¾ã™...</p>`;
                
                setTimeout(() => {
                    try {
                        startKanji();
                        html += `<p><span class="status-indicator status-success"></span>âœ… startKanji()å®Ÿè¡ŒæˆåŠŸï¼</p>`;
                    } catch (e) {
                        html += `<p><span class="status-indicator status-error"></span>âŒ å®Ÿè¡Œã‚¨ãƒ©ãƒ¼: ${e.message}</p>`;
                    }
                    document.getElementById('testResults').innerHTML = html;
                }, 3000);
            } else {
                html += `<p><span class="status-indicator status-error"></span>âŒ startKanjié–¢æ•°ãŒè¦‹ã¤ã‹ã‚‰ãªã„ãŸã‚å®Ÿè¡Œã§ãã¾ã›ã‚“</p>`;
            }
            
            results.innerHTML = html;
        }

        // ãƒ¢ãƒã‚¤ãƒ«å›ºæœ‰ãƒ†ã‚¹ãƒˆ
        function runMobileSpecificTest() {
            const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
            const hasTouch = 'ontouchstart' in window;
            const orientation = window.innerHeight > window.innerWidth ? 'Portrait' : 'Landscape';
            
            let html = '';
            if (isMobile) {
                html += `<span class="warning">ğŸ“± ãƒ¢ãƒã‚¤ãƒ«ãƒ‡ãƒã‚¤ã‚¹æ¤œå‡º</span><br>`;
                html += `ã‚¿ãƒƒãƒã‚µãƒãƒ¼ãƒˆ: ${hasTouch ? 'ã‚ã‚Š' : 'ãªã—'}<br>`;
                html += `ç”»é¢å‘ã: ${orientation}<br>`;
                html += `ãƒ“ãƒ¥ãƒ¼ãƒãƒ¼ãƒˆ: ${window.innerWidth}x${window.innerHeight}<br>`;
                
                if (hasTouch) {
                    html += `<span class="success">âœ… ã‚¿ãƒƒãƒã‚¤ãƒ™ãƒ³ãƒˆã«å¯¾å¿œã—ã¦ã„ã¾ã™</span><br>`;
                } else {
                    html += `<span class="warning">âš ï¸ ã‚¿ãƒƒãƒã‚¤ãƒ™ãƒ³ãƒˆãŒåˆ©ç”¨ã§ããªã„å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™</span><br>`;
                }
            } else {
                html += `<span class="info">ğŸ’» ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ç’°å¢ƒã§ã™</span><br>`;
                html += `ãƒã‚¦ã‚¹ã‚¤ãƒ™ãƒ³ãƒˆãŒåˆ©ç”¨å¯èƒ½ã§ã™<br>`;
            }
            
            document.getElementById('mobileTestResults').innerHTML = html;
        }

        // startKanjié–¢æ•°ã®ãƒ¢ãƒƒã‚¯ï¼ˆå­˜åœ¨ã—ãªã„å ´åˆã®ãŸã‚ï¼‰
        if (typeof startKanji === 'undefined') {
            function startKanji() {
                alert('ğŸ‰ startKanji()é–¢æ•°ãŒæ­£å¸¸ã«å®Ÿè¡Œã•ã‚Œã¾ã—ãŸï¼\n\nã“ã‚Œã¯ãƒ†ã‚¹ãƒˆç”¨ã®ãƒ¢ãƒƒã‚¯é–¢æ•°ã§ã™ã€‚\nå®Ÿéš›ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§ã¯æ¼¢å­—ç·´ç¿’ç”»é¢ã«é·ç§»ã—ã¾ã™ã€‚');
                console.log('ğŸ“ ãƒ†ã‚¹ãƒˆç”¨startKanjié–¢æ•°å®Ÿè¡Œ');
            }
        }

        // åˆæœŸåŒ–
        document.addEventListener('DOMContentLoaded', function() {
            runEnvironmentTest();
            runMobileSpecificTest();
        });
    </script>
</body>
</html>