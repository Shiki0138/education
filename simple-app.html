<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åˆæ ¼ã¸ã®é“ - å›½èªå­¦ç¿’ã‚¢ãƒ—ãƒªï¼ˆã‚·ãƒ³ãƒ—ãƒ«ç‰ˆï¼‰</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, sans-serif;
            background: linear-gradient(135deg, #e3f2fd 0%, #f3e5f5 100%);
            min-height: 100vh;
            color: #333;
            padding: 20px;
        }

        .container {
            max-width: 480px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background: linear-gradient(135deg, #1976d2, #1565c0);
            color: white;
            border-radius: 15px;
        }

        .menu-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 30px;
        }

        .menu-btn {
            background: linear-gradient(135deg, #bbdefb, #e3f2fd);
            border: 2px solid #90caf9;
            border-radius: 15px;
            padding: 25px;
            cursor: pointer;
            text-align: center;
            transition: all 0.3s ease;
            font-size: 16px;
            color: #1565c0;
        }

        .menu-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(25, 118, 210, 0.2);
        }

        .menu-icon {
            font-size: 36px;
            margin-bottom: 10px;
            display: block;
        }

        .screen {
            display: none;
        }

        .screen.active {
            display: block;
        }

        .practice-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid #e3f2fd;
        }

        .back-btn {
            background: #1976d2;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 10px;
            cursor: pointer;
        }

        .question-card {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 20px;
        }

        .question-text {
            font-size: 18px;
            margin-bottom: 20px;
            font-weight: bold;
        }

        .options {
            display: grid;
            gap: 10px;
        }

        .option-btn {
            background: #e3f2fd;
            border: 2px solid #90caf9;
            border-radius: 10px;
            padding: 15px;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.3s ease;
        }

        .option-btn:hover {
            background: #bbdefb;
        }

        .option-btn.correct {
            background: #c8e6c9;
            border-color: #4caf50;
            color: #2e7d32;
        }

        .option-btn.incorrect {
            background: #ffcdd2;
            border-color: #f44336;
            color: #c62828;
        }

        .result-popup {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            padding: 30px;
            border-radius: 20px;
            text-align: center;
            z-index: 10000;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.3);
            display: none;
        }

        .result-popup.show {
            display: block;
            animation: popupShow 0.3s ease-out;
        }

        @keyframes popupShow {
            from { opacity: 0; transform: translate(-50%, -50%) scale(0.8); }
            to { opacity: 1; transform: translate(-50%, -50%) scale(1); }
        }

        .result-icon {
            font-size: 60px;
            margin-bottom: 15px;
        }

        .debug-info {
            position: fixed;
            bottom: 20px;
            left: 20px;
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 10px;
            border-radius: 5px;
            font-size: 12px;
            z-index: 10000;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- ãƒ¡ã‚¤ãƒ³ç”»é¢ -->
        <div id="mainScreen" class="screen active">
            <div class="header">
                <h1>ğŸ“š åˆæ ¼ã¸ã®é“</h1>
                <p>ä¸­å­¦å—é¨“å›½èªå­¦ç¿’ã‚¢ãƒ—ãƒª</p>
                <div>Lv.<span id="userLevel">1</span> | <span id="streakDays">0</span>æ—¥é€£ç¶š</div>
            </div>

            <div class="menu-grid">
                <button class="menu-btn" onclick="startKanji()">
                    <span class="menu-icon">ğŸ“</span>
                    <div><strong>æ¼¢å­—ç·´ç¿’</strong></div>
                    <div>åŸºæœ¬æ¼¢å­—ã‚’ãƒã‚¹ã‚¿ãƒ¼</div>
                </button>
                <button class="menu-btn" onclick="startReading()">
                    <span class="menu-icon">ğŸ“–</span>
                    <div><strong>èª­è§£å•é¡Œ</strong></div>
                    <div>æ–‡ç« ç†è§£åŠ›ã‚’é›ãˆã‚‹</div>
                </button>
                <button class="menu-btn" onclick="startVocab()">
                    <span class="menu-icon">ğŸ’¬</span>
                    <div><strong>èªå½™åŠ›å¼·åŒ–</strong></div>
                    <div>ã“ã¨ã‚ã–ãƒ»æ…£ç”¨å¥</div>
                </button>
                <button class="menu-btn" onclick="startAI()">
                    <span class="menu-icon">ğŸ¤–</span>
                    <div><strong>AIå•é¡Œç”Ÿæˆ</strong></div>
                    <div>å€‹äººæœ€é©åŒ–å•é¡Œ</div>
                </button>
            </div>

            <div style="text-align: center; margin-top: 20px;">
                <div>ğŸ“Š ä»Šæ—¥ã®é€²æ—: <span id="todayProgress">0/30åˆ†</span></div>
                <div>â­ ãƒã‚¤ãƒ³ãƒˆ: <span id="totalPoints">0</span>pt</div>
                <div>ğŸ¯ æ­£ç­”ç‡: <span id="accuracy">0</span>%</div>
            </div>
        </div>

        <!-- æ¼¢å­—ç·´ç¿’ç”»é¢ -->
        <div id="kanjiScreen" class="screen">
            <div class="practice-header">
                <button class="back-btn" onclick="goHome()">â† æˆ»ã‚‹</button>
                <h2>ğŸ“ æ¼¢å­—ç·´ç¿’</h2>
                <div>ã‚¹ã‚³ã‚¢: <span id="score">0</span>ç‚¹</div>
            </div>

            <div class="question-card">
                <div>å•é¡Œ <span id="questionNum">1</span> / 5</div>
                <div class="question-text" id="questionText">
                    èª­ã¿è¾¼ã¿ä¸­...
                </div>
                <div class="options" id="optionsContainer">
                    <!-- é¸æŠè‚¢ãŒã“ã“ã«è¡¨ç¤ºã•ã‚Œã‚‹ -->
                </div>
            </div>

            <div style="text-align: center;">
                <button onclick="showHint()" style="background: #ffc107; color: white; border: none; padding: 10px 20px; border-radius: 10px; cursor: pointer;">
                    ğŸ’¡ ãƒ’ãƒ³ãƒˆ
                </button>
                <div id="hintText" style="margin-top: 10px; padding: 10px; background: #fff3cd; border-radius: 10px; display: none;"></div>
            </div>
        </div>

        <!-- çµæœãƒãƒƒãƒ—ã‚¢ãƒƒãƒ— -->
        <div id="resultPopup" class="result-popup">
            <div class="result-icon" id="resultIcon">ğŸ‰</div>
            <div id="resultMessage"></div>
            <button onclick="nextQuestion()" style="margin-top: 20px; padding: 10px 20px; background: #1976d2; color: white; border: none; border-radius: 10px; cursor: pointer;">
                æ¬¡ã®å•é¡Œ
            </button>
        </div>
    </div>

    <!-- ãƒ‡ãƒãƒƒã‚°æƒ…å ± -->
    <div class="debug-info" id="debugInfo">
        ã‚¢ãƒ—ãƒªçŠ¶æ…‹: <span id="appStatus">èª­ã¿è¾¼ã¿ä¸­...</span>
    </div>

    <script>
        // ã‚·ãƒ³ãƒ—ãƒ«ã§ç¢ºå®Ÿã«å‹•ä½œã™ã‚‹ã‚³ãƒ¼ãƒ‰
        console.log('ğŸš€ ã‚·ãƒ³ãƒ—ãƒ«ç‰ˆã‚¢ãƒ—ãƒªé–‹å§‹');

        // åŸºæœ¬ãƒ‡ãƒ¼ã‚¿
        let currentQuestion = 0;
        let score = 0;
        let userData = {
            level: 1,
            points: 0,
            streak: 0,
            accuracy: 0,
            questionsToday: 0,
            correctToday: 0
        };

        // æ¼¢å­—å•é¡Œãƒ‡ãƒ¼ã‚¿ï¼ˆæœ€å°é™ï¼‰
        const kanjiProblems = [
            {
                question: "æ¬¡ã®æ¼¢å­—ã®èª­ã¿æ–¹ã‚’é¸ã³ãªã•ã„ï¼šã€å­¦æ ¡ã€‘",
                options: ["ãŒã£ã“ã†", "ãŒãã“ã†", "ãŒãã—ã‚‡ã†", "ãŒã£ã—ã‚‡ã†"],
                correct: 0,
                hint: "ã¿ã‚“ãªãŒå‹‰å¼·ã™ã‚‹å ´æ‰€ã§ã™",
                explanation: "å­¦æ ¡ï¼ˆãŒã£ã“ã†ï¼‰= å‹‰å¼·ã™ã‚‹å ´æ‰€"
            },
            {
                question: "æ¬¡ã®æ¼¢å­—ã®èª­ã¿æ–¹ã‚’é¸ã³ãªã•ã„ï¼šã€å‹é”ã€‘",
                options: ["ã‚†ã†ãŸã¤", "ã¨ã‚‚ã ã¡", "ã‚†ã†ã ã¡", "ã¨ã‚‚ãŸã¤"],
                correct: 1,
                hint: "è¦ªã—ã„ä»²é–“ã®ã“ã¨ã§ã™",
                explanation: "å‹é”ï¼ˆã¨ã‚‚ã ã¡ï¼‰= è¦ªã—ã„ä»²é–“"
            },
            {
                question: "æ¬¡ã®æ¼¢å­—ã®èª­ã¿æ–¹ã‚’é¸ã³ãªã•ã„ï¼šã€å…ˆç”Ÿã€‘",
                options: ["ã›ã‚“ã›ã„", "ã›ã‚“ã˜ã‚‡ã†", "ã•ãã†ã¾ã‚Œ", "ã›ã‚“ã—ã‚‡ã†"],
                correct: 0,
                hint: "æ•™ãˆã¦ãã‚Œã‚‹äººã§ã™",
                explanation: "å…ˆç”Ÿï¼ˆã›ã‚“ã›ã„ï¼‰= æ•™ãˆã¦ãã‚Œã‚‹äºº"
            },
            {
                question: "æ¬¡ã®æ¼¢å­—ã®èª­ã¿æ–¹ã‚’é¸ã³ãªã•ã„ï¼šã€è‡ªç„¶ã€‘",
                options: ["ã—ãœã‚“", "ã˜ã­ã‚“", "ã—ã­ã‚“", "ã˜ãœã‚“"],
                correct: 0,
                hint: "äººå·¥ã§ãªã„ã‚‚ã®",
                explanation: "è‡ªç„¶ï¼ˆã—ãœã‚“ï¼‰= äººå·¥ã§ãªã„ã‚‚ã®"
            },
            {
                question: "æ¬¡ã®æ¼¢å­—ã®èª­ã¿æ–¹ã‚’é¸ã³ãªã•ã„ï¼šã€é‹å‹•ã€‘",
                options: ["ã†ã‚“ã©ã†", "ã†ã‚“ã¦ã‚“", "ã†ã‚“ãã†", "ã†ã‚“ã‚†ã†"],
                correct: 0,
                hint: "ä½“ã‚’å‹•ã‹ã™ã“ã¨",
                explanation: "é‹å‹•ï¼ˆã†ã‚“ã©ã†ï¼‰= ä½“ã‚’å‹•ã‹ã™ã“ã¨"
            }
        ];

        // ç”»é¢åˆ‡ã‚Šæ›¿ãˆé–¢æ•°
        function showScreen(screenId) {
            console.log(`ğŸ”„ ç”»é¢åˆ‡ã‚Šæ›¿ãˆ: ${screenId}`);
            document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
            const screen = document.getElementById(screenId);
            if (screen) {
                screen.classList.add('active');
                console.log(`âœ… ${screenId} è¡¨ç¤ºå®Œäº†`);
            } else {
                console.error(`âŒ ${screenId} ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“`);
            }
        }

        // æ¼¢å­—ç·´ç¿’é–‹å§‹
        function startKanji() {
            console.log('ğŸ“ æ¼¢å­—ç·´ç¿’é–‹å§‹ï¼ˆã‚·ãƒ³ãƒ—ãƒ«ç‰ˆï¼‰');
            currentQuestion = 0;
            score = 0;
            showScreen('kanjiScreen');
            showKanjiQuestion();
        }

        // èª­è§£å•é¡Œé–‹å§‹
        function startReading() {
            console.log('ğŸ“– èª­è§£å•é¡Œé–‹å§‹');
            alert('èª­è§£å•é¡Œæ©Ÿèƒ½ã§ã™ã€‚\nç¾åœ¨ã€æ¼¢å­—ç·´ç¿’ã‹ã‚‰å§‹ã‚ã‚‹ã“ã¨ã‚’ãŠå‹§ã‚ã—ã¾ã™ã€‚');
            startKanji();
        }

        // èªå½™åŠ›å¼·åŒ–é–‹å§‹
        function startVocab() {
            console.log('ğŸ’¬ èªå½™åŠ›å¼·åŒ–é–‹å§‹');
            alert('èªå½™åŠ›å¼·åŒ–æ©Ÿèƒ½ã§ã™ã€‚\nã“ã¨ã‚ã–ã‚„æ…£ç”¨å¥ã‚’å­¦ç¿’ã§ãã¾ã™ã€‚\nç¾åœ¨æº–å‚™ä¸­ã®ãŸã‚ã€æ¼¢å­—ç·´ç¿’ã‹ã‚‰å§‹ã‚ã¦ãã ã•ã„ã€‚');
            startKanji();
        }

        // AIå•é¡Œç”Ÿæˆé–‹å§‹
        function startAI() {
            console.log('ğŸ¤– AIå•é¡Œç”Ÿæˆé–‹å§‹');
            alert('AIå•é¡Œç”Ÿæˆæ©Ÿèƒ½ã§ã™ã€‚\nã‚ãªãŸã®å¼±ç‚¹ã‚’åˆ†æã—ã¦æœ€é©ãªå•é¡Œã‚’å‡ºé¡Œã—ã¾ã™ã€‚\nç¾åœ¨ã¯æ¼¢å­—ç·´ç¿’ã‚’ãŠæ¥½ã—ã¿ãã ã•ã„ã€‚');
            startKanji();
        }

        // ãƒ›ãƒ¼ãƒ ç”»é¢ã«æˆ»ã‚‹
        function goHome() {
            console.log('ğŸ  ãƒ›ãƒ¼ãƒ ç”»é¢ã«æˆ»ã‚‹');
            showScreen('mainScreen');
        }

        // æ¼¢å­—å•é¡Œè¡¨ç¤º
        function showKanjiQuestion() {
            if (currentQuestion >= kanjiProblems.length) {
                showResult();
                return;
            }

            const problem = kanjiProblems[currentQuestion];
            
            document.getElementById('questionNum').textContent = currentQuestion + 1;
            document.getElementById('questionText').textContent = problem.question;
            
            const optionsHTML = problem.options.map((option, index) => 
                `<button class="option-btn" onclick="checkAnswer(${index})">${index + 1}. ${option}</button>`
            ).join('');
            
            document.getElementById('optionsContainer').innerHTML = optionsHTML;
            document.getElementById('hintText').style.display = 'none';
            
            console.log(`ğŸ“ å•é¡Œ${currentQuestion + 1}è¡¨ç¤º: ${problem.question}`);
        }

        // ç­”ãˆåˆã‚ã›
        function checkAnswer(selected) {
            const problem = kanjiProblems[currentQuestion];
            const buttons = document.querySelectorAll('.option-btn');
            const isCorrect = selected === problem.correct;
            
            console.log(`ğŸ” ç­”ãˆåˆã‚ã›: é¸æŠ=${selected}, æ­£è§£=${problem.correct}, çµæœ=${isCorrect ? 'æ­£è§£' : 'ä¸æ­£è§£'}`);
            
            if (isCorrect) {
                buttons[selected].classList.add('correct');
                score += 10;
                userData.correctToday++;
                showResultPopup(true, problem.explanation);
            } else {
                buttons[selected].classList.add('incorrect');
                buttons[problem.correct].classList.add('correct');
                showResultPopup(false, problem.explanation);
            }
            
            userData.questionsToday++;
            updateUI();
            
            setTimeout(() => {
                currentQuestion++;
                closeResultPopup();
                showKanjiQuestion();
            }, 2500);
        }

        // çµæœãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—è¡¨ç¤º
        function showResultPopup(isCorrect, explanation) {
            const popup = document.getElementById('resultPopup');
            const icon = document.getElementById('resultIcon');
            const message = document.getElementById('resultMessage');
            
            if (isCorrect) {
                icon.textContent = 'ğŸ‰';
                message.innerHTML = `<strong>æ­£è§£ï¼</strong><br>${explanation}`;
            } else {
                icon.textContent = 'ğŸ˜…';
                message.innerHTML = `<strong>ä¸æ­£è§£</strong><br>${explanation}`;
            }
            
            popup.classList.add('show');
        }

        // çµæœãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ã‚’é–‰ã˜ã‚‹
        function closeResultPopup() {
            document.getElementById('resultPopup').classList.remove('show');
        }

        // æ¬¡ã®å•é¡Œ
        function nextQuestion() {
            closeResultPopup();
            currentQuestion++;
            showKanjiQuestion();
        }

        // ãƒ’ãƒ³ãƒˆè¡¨ç¤º
        function showHint() {
            const problem = kanjiProblems[currentQuestion];
            const hintEl = document.getElementById('hintText');
            hintEl.textContent = problem.hint;
            hintEl.style.display = 'block';
        }

        // UIæ›´æ–°
        function updateUI() {
            document.getElementById('score').textContent = score;
            document.getElementById('totalPoints').textContent = userData.points;
            document.getElementById('userLevel').textContent = userData.level;
            document.getElementById('streakDays').textContent = userData.streak;
            
            const accuracy = userData.questionsToday > 0 
                ? Math.round((userData.correctToday / userData.questionsToday) * 100) 
                : 0;
            document.getElementById('accuracy').textContent = accuracy;
            
            document.getElementById('todayProgress').textContent = `${Math.min(userData.questionsToday * 3, 30)}/30åˆ†`;
        }

        // çµæœè¡¨ç¤º
        function showResult() {
            const accuracy = userData.questionsToday > 0 
                ? Math.round((userData.correctToday / userData.questionsToday) * 100) 
                : 0;
            
            alert(`ğŸ† æ¼¢å­—ç·´ç¿’å®Œäº†ï¼
                    
ã‚¹ã‚³ã‚¢: ${score}ç‚¹
æ­£ç­”ç‡: ${accuracy}%
                    
ãŠç–²ã‚Œã•ã¾ã§ã—ãŸï¼`);
            
            goHome();
        }

        // åˆæœŸåŒ–
        document.addEventListener('DOMContentLoaded', function() {
            console.log('âœ… ã‚·ãƒ³ãƒ—ãƒ«ç‰ˆã‚¢ãƒ—ãƒªèª­ã¿è¾¼ã¿å®Œäº†');
            document.getElementById('appStatus').textContent = 'æ­£å¸¸å‹•ä½œä¸­';
            updateUI();
            
            // 5ç§’å¾Œã«å‹•ä½œç¢ºèª
            setTimeout(() => {
                console.log('ğŸ” 5ç§’å¾Œå‹•ä½œç¢ºèª');
                const kanjiBtn = document.querySelector('.menu-btn');
                if (kanjiBtn) {
                    console.log('âœ… æ¼¢å­—ãƒœã‚¿ãƒ³è¦ç´ å­˜åœ¨ç¢ºèª');
                } else {
                    console.error('âŒ æ¼¢å­—ãƒœã‚¿ãƒ³è¦ç´ ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“');
                }
            }, 5000);
        });

        // ãƒ‡ãƒãƒƒã‚°ç”¨ï¼šå¼·åˆ¶çš„ã«ãƒœã‚¿ãƒ³ã‚’æœ‰åŠ¹åŒ–
        setTimeout(() => {
            const buttons = document.querySelectorAll('.menu-btn');
            buttons.forEach((btn, index) => {
                btn.addEventListener('click', () => {
                    console.log(`ğŸ”˜ ãƒœã‚¿ãƒ³${index + 1}ãŒã‚¯ãƒªãƒƒã‚¯ã•ã‚Œã¾ã—ãŸ`);
                });
            });
            console.log('ğŸ”˜ ãƒœã‚¿ãƒ³ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼è¿½åŠ å®Œäº†');
        }, 2000);

    </script>
</body>
</html>